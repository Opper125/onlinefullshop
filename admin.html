<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Myanmar E-Shop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Myanmar+Text&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Myanmar Text', 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
        }
        
        .card-shadow {
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        .animate-slide-up {
            animation: slideUp 0.6s ease-out;
        }
        
        .animate-bounce-in {
            animation: bounceIn 0.8s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .success-message {
            background: linear-gradient(90deg, #10b981, #059669);
            color: white;
        }
        
        .error-message {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            color: white;
        }
        
        .tab-active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
        }
        
        .sidebar {
            background: linear-gradient(180deg, #1f2937 0%, #374151 100%);
        }
        
        .sidebar-item {
            transition: all 0.3s ease;
        }
        
        .sidebar-item:hover, .sidebar-item.active {
            background: rgba(59, 130, 246, 0.2);
            border-left: 4px solid #3b82f6;
        }
        
        .connection-status {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-connected {
            background: #10b981;
            color: white;
        }
        
        .status-disconnected {
            background: #ef4444;
            color: white;
        }

        .table-container {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .edit-form {
            display: none;
        }
        
        .edit-form.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status status-disconnected">
        <i class="fas fa-wifi mr-1"></i>
        <span id="connectionText">ချိတ်ဆက်နေသည်...</span>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-2xl text-center animate-bounce-in">
            <div class="loading-spinner mx-auto mb-4"></div>
            <p class="text-gray-600 font-medium">ကွန်ပျူတာများကို ကောင်းရမ်းလုပ်နေသည်...</p>
        </div>
    </div>

    <!-- Success/Error Messages -->
    <div id="messageContainer" class="fixed top-20 right-4 z-50 space-y-2"></div>

    <!-- Admin Login Section -->
    <div id="adminLoginSection" class="min-h-screen flex items-center justify-center p-4 gradient-bg animate-fade-in">
        <div class="w-full max-w-md">
            <!-- Logo -->
            <div class="text-center mb-8 animate-bounce-in">
                <img src="https://github.com/Opper125/onlinefullshop/blob/27ec68bd95250f633560c60baaad541d29f94f16/logo-dashboard.png?raw=true" 
                     alt="Myanmar E-Shop Logo" class="w-20 h-20 mx-auto rounded-2xl shadow-lg mb-4">
                <h1 class="text-3xl font-bold text-white">Admin Panel</h1>
                <p class="text-blue-100">Myanmar E-Shop Management</p>
            </div>

            <!-- Login Form -->
            <div class="bg-white rounded-2xl card-shadow p-6 animate-slide-up">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Admin Login</h2>
                <form id="adminLoginForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Admin Password</label>
                        <input type="password" id="adminPassword" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <button type="submit" class="w-full btn-primary text-white py-3 rounded-lg font-medium">
                        Login to Admin Panel
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="hidden min-h-screen flex">
        <!-- Sidebar -->
        <div class="w-64 sidebar">
            <div class="p-6">
                <div class="flex items-center mb-8">
                    <img src="https://github.com/Opper125/onlinefullshop/blob/27ec68bd95250f633560c60baaad541d29f94f16/logo-dashboard.png?raw=true" 
                         alt="Logo" class="w-10 h-10 rounded-lg mr-3">
                    <h2 class="text-white text-xl font-bold">Admin Panel</h2>
                </div>
                
                <nav class="space-y-2">
                    <button class="sidebar-item active w-full text-left p-3 text-white rounded-lg" data-section="products">
                        <i class="fas fa-box mr-3"></i>
                        Products Management
                    </button>
                    <button class="sidebar-item w-full text-left p-3 text-white rounded-lg" data-section="payments">
                        <i class="fas fa-credit-card mr-3"></i>
                        Payment Methods
                    </button>
                    <button class="sidebar-item w-full text-left p-3 text-white rounded-lg" data-section="orders">
                        <i class="fas fa-shopping-cart mr-3"></i>
                        Orders Management
                    </button>
                    <button class="sidebar-item w-full text-left p-3 text-white rounded-lg" data-section="news">
                        <i class="fas fa-newspaper mr-3"></i>
                        News Management
                    </button>
                </nav>
                
                <div class="mt-8 pt-8 border-t border-gray-600">
                    <button id="adminLogoutBtn" class="w-full text-left p-3 text-red-300 hover:text-red-100 rounded-lg">
                        <i class="fas fa-sign-out-alt mr-3"></i>
                        Logout
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-6">
            <!-- Products Management -->
            <div id="productsSection" class="section">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Products Management</h2>
                
                <!-- Add Product Form -->
                <div class="bg-white rounded-2xl card-shadow p-6 mb-6">
                    <h3 class="text-xl font-semibold mb-4">Add New Product</h3>
                    <form id="addProductForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Product Name</label>
                            <input type="text" id="productName" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Product Icon URL</label>
                            <input type="url" id="productIcon" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                            <textarea id="productDescription" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="3" required></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Price (MMK)</label>
                            <input type="number" id="productPrice" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Info (JSON)</label>
                            <input type="text" id="productContact" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                                   placeholder='{"telegram": "https://t.me/username"}' required>
                        </div>
                        <div class="md:col-span-2">
                            <button type="submit" class="btn-primary text-white px-6 py-3 rounded-lg font-medium">
                                Add Product
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Products List -->
                <div class="bg-white rounded-2xl card-shadow p-6">
                    <h3 class="text-xl font-semibold mb-4">Existing Products</h3>
                    <div class="table-container">
                        <div id="productsList" class="space-y-4">
                            <!-- Products will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Methods Management -->
            <div id="paymentsSection" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Payment Methods Management</h2>
                
                <!-- Add Payment Method Form -->
                <div class="bg-white rounded-2xl card-shadow p-6 mb-6">
                    <h3 class="text-xl font-semibold mb-4">Add New Payment Method</h3>
                    <form id="addPaymentForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Payment Name</label>
                            <input type="text" id="paymentName" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Payment Icon URL</label>
                            <input type="url" id="paymentIcon" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                            <textarea id="paymentDescription" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="2" required></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Payment Address</label>
                            <input type="text" id="paymentAddress" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">QR Code URL</label>
                            <input type="url" id="paymentQR" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div class="md:col-span-2">
                            <button type="submit" class="btn-primary text-white px-6 py-3 rounded-lg font-medium">
                                Add Payment Method
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Payment Methods List -->
                <div class="bg-white rounded-2xl card-shadow p-6">
                    <h3 class="text-xl font-semibold mb-4">Existing Payment Methods</h3>
                    <div class="table-container">
                        <div id="paymentsList" class="space-y-4">
                            <!-- Payment methods will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Orders Management -->
            <div id="ordersSection" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Orders Management</h2>
                
                <div class="bg-white rounded-2xl card-shadow p-6">
                    <h3 class="text-xl font-semibold mb-4">Pending Orders</h3>
                    <div class="table-container">
                        <div id="ordersList" class="space-y-4">
                            <!-- Orders will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- News Management -->
            <div id="newsSection" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">News Management</h2>
                
                <!-- Add News Form -->
                <div class="bg-white rounded-2xl card-shadow p-6 mb-6">
                    <h3 class="text-xl font-semibold mb-4">Add New News</h3>
                    <form id="addNewsForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                            <input type="text" id="newsTitle" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Content</label>
                            <textarea id="newsContent" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="4" required></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Images URLs (comma separated)</label>
                            <input type="text" id="newsImages" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                                   placeholder="https://image1.jpg, https://image2.jpg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">YouTube Video URL</label>
                            <input type="url" id="newsVideo" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Info (JSON)</label>
                            <input type="text" id="newsContact" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                                   placeholder='{"telegram": "https://t.me/username"}' required>
                        </div>
                        <button type="submit" class="btn-primary text-white px-6 py-3 rounded-lg font-medium">
                            Add News
                        </button>
                    </form>
                </div>
                
                <!-- News List -->
                <div class="bg-white rounded-2xl card-shadow p-6">
                    <h3 class="text-xl font-semibold mb-4">Existing News</h3>
                    <div class="table-container">
                        <div id="newsList" class="space-y-4">
                            <!-- News will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div id="editProductModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-bounce-in">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-800">Edit Product</h3>
                    <button id="closeEditProductModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="editProductForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="hidden" id="editProductId">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Product Name</label>
                        <input type="text" id="editProductName" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Product Icon URL</label>
                        <input type="url" id="editProductIcon" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="editProductDescription" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="3" required></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Price (MMK)</label>
                        <input type="number" id="editProductPrice" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Contact Info (JSON)</label>
                        <input type="text" id="editProductContact" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="md:col-span-2 flex gap-2">
                        <button type="submit" class="btn-success text-white px-6 py-3 rounded-lg font-medium">
                            Update Product
                        </button>
                        <button type="button" onclick="admin.closeModal('editProductModal')" class="btn-secondary bg-gray-500 text-white px-6 py-3 rounded-lg font-medium">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Similar modals for editing payments and news -->
    <div id="editPaymentModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-bounce-in">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-800">Edit Payment Method</h3>
                    <button id="closeEditPaymentModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="editPaymentForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="hidden" id="editPaymentId">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Payment Name</label>
                        <input type="text" id="editPaymentName" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Payment Icon URL</label>
                        <input type="url" id="editPaymentIcon" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="editPaymentDescription" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="2" required></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Payment Address</label>
                        <input type="text" id="editPaymentAddress" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">QR Code URL</label>
                        <input type="url" id="editPaymentQR" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="md:col-span-2 flex gap-2">
                        <button type="submit" class="btn-success text-white px-6 py-3 rounded-lg font-medium">
                            Update Payment Method
                        </button>
                        <button type="button" onclick="admin.closeModal('editPaymentModal')" class="btn-secondary bg-gray-500 text-white px-6 py-3 rounded-lg font-medium">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="editNewsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-bounce-in">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-800">Edit News</h3>
                    <button id="closeEditNewsModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="editNewsForm" class="space-y-4">
                    <input type="hidden" id="editNewsId">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                        <input type="text" id="editNewsTitle" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Content</label>
                        <textarea id="editNewsContent" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="4" required></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Images URLs (comma separated)</label>
                        <input type="text" id="editNewsImages" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">YouTube Video URL</label>
                        <input type="url" id="editNewsVideo" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Contact Info (JSON)</label>
                        <input type="text" id="editNewsContact" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex gap-2">
                        <button type="submit" class="btn-success text-white px-6 py-3 rounded-lg font-medium">
                            Update News
                        </button>
                        <button type="button" onclick="admin.closeModal('editNewsModal')" class="btn-secondary bg-gray-500 text-white px-6 py-3 rounded-lg font-medium">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="js/admin.js"></script>
</body>
</html>